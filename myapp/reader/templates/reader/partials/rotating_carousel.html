{% load books_extras %}
{# Rotating carousel partial - displays books in a 3D rotating carousel with ribbon layout #}
{# Parameters: books (queryset), current_language (Language object), section_id (unique identifier) #}

<div class="featured-carousel-wrapper">
    <div class="featured-carousel-container">
        <button class="carousel-nav-btn prev" id="{{ section_id }}Prev">
            <i class="fas fa-chevron-left"></i>
        </button>

        <div class="carousel-cover-ribbon" data-carousel-id="{{ section_id }}">
            {% for book in books %}
            <div class="carousel-cover-item" data-index="{{ forloop.counter0 }}">
                <a href="{% url 'reader:book_detail' current_language.code book.slug %}" class="cover-link">
                    <img src="{{ book.effective_cover_image }}" class="ribbon-cover" alt="{{ book.title }}">
                    <div class="cover-metadata">
                        <h3 class="cover-title">{{ book.title }}</h3>
                        <div class="cover-info">
                            <div class="cover-genres">
                                {% for genre in book.bookmaster.genres.all|slice:":2" %}
                                <span class="genre-badge">{{ genre.localized_name }}</span>
                                {% if not forloop.last %} Â· {% endif %}
                                {% endfor %}
                            </div>
                            <div class="cover-status">
                                {% if book.progress == 'completed' %}
                                <span class="status-badge completed">Completed</span>
                                {% else %}
                                <span class="status-badge ongoing">Ongoing</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>

        <button class="carousel-nav-btn next" id="{{ section_id }}Next">
            <i class="fas fa-chevron-right"></i>
        </button>
    </div>
    <div class="carousel-indicators" id="{{ section_id }}Indicators"></div>
</div>
